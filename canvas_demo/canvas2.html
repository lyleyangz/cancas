<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CANVAS_bg</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1,user-scalable=no">
    <script src="./js/jquery.js"></script>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>
</body>
<script type="text/javascript">
    var ratio = window.devicePixelRatio;
    var startY =0,endY = 0,currentDis=0;
    var totalHeight = 0;
    // 1.准备画布
    // 2.选择画笔
    // 3.选择颜料
    // 4.画出轮廓
    // 5.填充颜色
    window.onload = function () {
        var canvas1 = document.getElementById('canvas');
        var cxt1 = canvas1.getContext('2d');
        var cw = canvas1.offsetWidth;
        var ch = canvas1.offsetHeight;
        var widthratio = cw / 375;
        var heightratio = ch / 667;
        var scorllratio = widthratio*ratio/2;
        var img2 = new Image();
        img2.src = 'img/page3_atlas_P_2.png';
        var img3 = new Image();
        img3.src = 'img/page3_atlas_P_3.png';
        var img4 = new Image();
        img4.src = 'img/page3_atlas_P_.png'
        var topMusic = new Image();
        topMusic.src = "./img/loading_atlas_P_.png"
        
        var bg_first = new Image();
        bg_first.src = "./img/bg_1.jpg";
        var bg_second = new Image();
        bg_second.src = "./img/bg_2.jpg";
        var bg_third = new Image();
        bg_third.src = "./img/bg_3.jpg";
        var bg_four = new Image();
        bg_four.src = "./img/bg_4.jpg";
        
        bg_four.onload = function () {
            setTimeout(function () {
                drawImg()
            }, 500);
        }
        function BG(number){
            var parameter={
                width:0,
                height:0
            }
            switch(number){
                case 1:
                parameter.width = bg_first.width;
                parameter.height = bg_first.height;
                break;
                case 2:
                parameter.width = bg_second.width;
                parameter.height = bg_second.height;
                break;
                case 3:
                parameter.width = bg_third.width;
                parameter.height = bg_third.height;
                break;
                case 4:
                parameter.width = bg_four.width;
                parameter.height = bg_four.height;
                break;
            }
            return parameter
        }
        window.addEventListener('touchstart', e => {
            var touch = event.changedTouches[0];
            startY = touch.pageY;
        }, { passive: false });
        window.addEventListener('touchmove', e => {
            var touch = event.changedTouches[0];
            endY = touch.pageY;
            currentDis += endY - startY;
            startY = endY;
            // 向下滑
            // if(endY - startY>0){
                
            // }else if(endY - startY<0){
            //     // 向上滑
            // }
            if(-currentDis>=totalHeight){
                currentDis = -totalHeight;
            }
            if(-currentDis<=0){
                currentDis = 0;
            }
            // console.log(currentDis)
            drawImg()
        }, { passive: false });
        // window.addEventListener('touchend', e => {
        //     var touch = e.changedTouches[0];
        // }, { passive: false });
        // 缩放比例
        function distanceScoll(dis){
            return 1-(-currentDis>dis*scorllratio ? -(currentDis+dis*scorllratio):0)/100>0 ? (1-(-currentDis>dis*scorllratio ? -(currentDis+dis*scorllratio):0)/100):0
        }
        // 位移
        function cloudsDistance(dis,speed){
            return -currentDis>dis*scorllratio ? (currentDis+dis*scorllratio)*speed:0;
        }
        // 缩放中心
        function scalePosition(attr,pos,scale,ratioFlag){
            if(ratioFlag){
                return (pos*ratio-(attr*ratioFlag*scale-attr*ratioFlag))/scale/ratio
            }else{
                return (pos*ratio-(attr*scale-attr))/scale/ratio
            }
        }
        function drawImg() {
            var imgW = BG(1).width;
            var imgH = BG(1).height;
            resizeCanvas(cw * ratio, ch * ratio);
            totalHeight = (cw * imgH * ratio / imgW) + (cw *  BG(2).height * ratio /  BG(2).width) + (cw *  BG(3).height * ratio /  BG(3).width) + (cw *  BG(4).height * ratio /  BG(4).width);
            cxt1.translate(0,currentDis);
            cxt1.save()
            cxt1.drawImage(bg_first, 0, 0, cw * ratio, cw * imgH * ratio / imgW);
            cxt1.drawImage(bg_second, 0,(cw * imgH * ratio / imgW), cw * ratio, cw *  BG(2).height * ratio /  BG(2).width);  //第二章背景图
            cxt1.drawImage(bg_third, 0,(cw * imgH * ratio / imgW) + (cw *  BG(2).height * ratio /  BG(2).width), cw * ratio, cw *  BG(3).height * ratio /  BG(3).width);  //第3章背景图
            cxt1.drawImage(bg_four,  0,(cw * imgH * ratio / imgW) + (cw *  BG(2).height * ratio /  BG(2).width) + (cw *  BG(3).height * ratio /  BG(3).width), cw * ratio, cw *  BG(4).height * ratio /  BG(4).width);  //第4章背景图 
            cxt1.restore()

            drawImage(img2, 997, 1407, 368, 284, 0, 29.5);       //左侧第一个图
            drawImage(img3, 620, 0, 204, 230, 273, 27);         //右侧第一个图
            drawImage(img2, 1852, 925, 180, 468, 286, 96.5);       //左侧第二个图
            drawImage(img2, 752, 920, 242, 528, 0, 69);         //右侧第二个图
            drawImage(img3, 448, 860, 296, 74, 22, 17.5);       //王者荣耀，kpl，vivo图标
            drawImage(img3, 826, 0, 154, 300, 0, 149.5);         //左侧第三个图
            drawImage(img2, 0, 296, 750, 236, 0, 256);         //致敬巅峰上面第三个图
            drawImage(img2, 0, 0, 750, 288, 0, 281.5);         //致敬巅峰上面第二个图
            cxt1.save()
            cxt1.translate(0,currentDis/ratio*0.25)
            drawImage(img4, 0, 653, 750, 612, 0, 358);         //致敬巅峰上面第一个图
            drawImage(img4, 1020, 0, 488, 598, 71, 47.5);       //致敬巅峰图
            cxt1.restore()
            cxt1.save()
            cxt1.translate(0,currentDis/ratio*0.12)
            drawImage(img2, 1366, 1512, 510, 152, 60, 392.7);     //致敬巅峰字
            drawImage(img4, 1493, 615, 490, 408, 81.5, 423.7);     //KPL
            cxt1.restore()
            drawImage(img4, 752, 0, 270, 1580, 119.5, 620.3);     //天梯
            
            cxt1.save()
            let hozzL_one = cloudsDistance(400,1);
            cxt1.translate(hozzL_one,0)
            drawImage(img2, 1084, 1693,344, 216,0,620,172, 108);     //天梯左边第一层云朵
            cxt1.restore()

            cxt1.save()
            let hozzR_one = cloudsDistance(390,3);
            cxt1.translate(-hozzR_one,0)
            drawImage(img2, 718, 1693,364, 202,192,620,182, 101);     //天梯右边第一层云朵
            cxt1.restore()

            cxt1.save()
            let hozzR_two = cloudsDistance(470,2);
            cxt1.translate(-hozzR_two,0)
            drawImage(img3, 0, 876,193, 100,278,760);     //天梯右边第2层云朵
            cxt1.restore()

            cxt1.save()
            let hozzL_two = cloudsDistance(928,1);
            cxt1.translate(hozzL_two,0)
            drawImage(img3, 899, 303,119, 100,0,760);     //天梯左边第2层云朵
            cxt1.restore()

            cxt1.save()
            let hozzL_three = cloudsDistance(1000,1);
            cxt1.translate(hozzL_three,0)
            drawImage(img3, 330, 101,281, 86,20,816);     //天梯左边第3层云朵
            cxt1.restore()

            cxt1.save()
            let hozzL_four = cloudsDistance(1162,1);
            cxt1.translate(hozzL_four,0)
            drawImage(img3, 809, 436,197, 166,0,826);     //天梯左边第4层云朵
            cxt1.restore()

            cxt1.save()
            let hozzR_four = cloudsDistance(1240,1);
            cxt1.translate(-hozzR_four,0)
            drawImage(img3, 0, 721,206, 152,278,856);     //天梯右边第4层云朵
            cxt1.restore()

            cxt1.save()
            let hozzR_three = cloudsDistance(1150,2.3);
            cxt1.translate(-hozzR_three,0)
            drawImage(img2, 1370, 1238,405, 273,178,756);     //天梯右边第3层云朵
            cxt1.restore()

            cxt1.save()
            let hozzL_fifth = cloudsDistance(1435,1);
            cxt1.translate(hozzL_fifth,0)
            drawImage(img3, 585, 622,276, 116,0,900);     //天梯左边第5层云朵
            cxt1.restore()

            cxt1.save()
            let hozzR_fifth = cloudsDistance(1522,1);
            cxt1.translate(-hozzR_fifth,0)
            drawImage(img3, 0, 480,296, 138,227,896);     //天梯右边第5层云朵
            cxt1.restore()

            cxt1.save()
            let hozzL_six = cloudsDistance(1634,2.4);
            cxt1.translate(hozzL_six,0)
            drawImage(img2, 1428, 917,421, 317,0,926);     //天梯左边第6层云朵
            cxt1.restore()

            cxt1.save()
            let hozzR_six = cloudsDistance(1716,0.85);
            cxt1.translate(-hozzR_six,0)
            drawImage(img3, 303, 190,150, 303,301,945);     //天梯右边第6层云朵
            cxt1.restore()

            cxt1.save()
            let hozzL_seven = cloudsDistance(1836,1);
            cxt1.translate(hozzL_seven,0)
            drawImage(img3, 450, 933,234, 70,59,1070);     //天梯中间上面第7层云朵
            cxt1.restore()
            

            cxt1.save()
            let hozzL_eight = cloudsDistance(2134,1);
            cxt1.translate(hozzL_eight,0)
            drawImage(img2, 0, 1695,337, 309,0,1120);     //天梯第三层文字下的云朵(你可能)
            cxt1.restore()


            /************************************************************天梯一左边字**********************************************************************************************/
            cxt1.save()
            let scaleword= distanceScoll(723);
            cxt1.scale(scaleword,scaleword);
            console.log(scalePosition(188,57,scaleword,scorllratio))
            // drawImage(img3, 297, 1138, 188, 50, (57*ratio-(188*scorllratio*scaleword-188*scorllratio))/scaleword/ratio, (620*ratio-(50*scaleword-50))/scaleword/ratio);        //天梯左边第1行字
            drawImage(img3, 297, 1138, 188, 50, scalePosition(188,57,scaleword,scorllratio),scalePosition(50,620,scaleword,false));        //天梯左边第1行字
            cxt1.restore()
            
            cxt1.save()
            let scaleword_s= distanceScoll(757);
            cxt1.scale(scaleword_s,scaleword_s);
            // drawImage(img3, 134, 1057, 188, 73, (57*ratio-(188*scaleword_s-188))/scaleword_s/ratio, (635*ratio-(73*scaleword_s-73))/scaleword_s/ratio);       //天梯左边第2行字
            drawImage(img3, 134, 1057, 188, 73, scalePosition(188,57,scaleword_s,scorllratio),scalePosition(73,635,scaleword_s,false));       //天梯左边第2行字
            cxt1.restore()

            cxt1.save()
            let scaleword_t= distanceScoll(771);
            cxt1.scale(scaleword_t,scaleword_t);
            // drawImage(img3, 649, 1145, 186, 49, (57*ratio-(188*scaleword_t-188))/scaleword_t/ratio, (662*ratio-(73*scaleword_t-73))/scaleword_t/ratio);       //天梯左边第3行字
            drawImage(img3, 649, 1145, 186, 49, scalePosition(188,57,scaleword_t,scorllratio),scalePosition(73,662,scaleword_t,false));       //天梯左边第3行字
            cxt1.restore()

            cxt1.save()
            let scaleword_four= distanceScoll(800);
            cxt1.scale(scaleword_four,scaleword_four);
            // drawImage(img3, 665, 1090, 187, 53, (57*ratio-(187*scaleword_four-187))/scaleword_four/ratio, (678*ratio-(53*scaleword_four-53))/scaleword_four/ratio);  //天梯左边第4行字
            drawImage(img3, 665, 1090, 187, 53, scalePosition(187,57,scaleword_four,scorllratio),scalePosition(53,678,scaleword_four,false));  //天梯左边第4行字
            cxt1.restore()
            
            cxt1.save()
            let scaleword_fif= distanceScoll(814);
            cxt1.scale(scaleword_fif,scaleword_fif);
            // drawImage(img3, 296, 1191, 185, 47,(57*ratio-(185*scaleword_fif-185))/scaleword_fif/ratio, (698*ratio-(47*scaleword_fif-47))/scaleword_fif/ratio);       //天梯左边第5行字
            drawImage(img3, 296, 1191, 185, 47,scalePosition(185,57,scaleword_fif,scorllratio),scalePosition(47,698,scaleword_fif,false));       //天梯左边第5行字
            cxt1.restore()

            cxt1.save()
            let scaleword_six= distanceScoll(848);
            cxt1.scale(scaleword_six,scaleword_six);
            // drawImage(img3, 610, 229, 185, 65, (57*ratio-(185*scaleword_six-185))/scaleword_six/ratio, (717*ratio-(65*scaleword_six-65))/scaleword_six/ratio);       //天梯左边第6行字
            drawImage(img3, 610, 229, 185, 65, scalePosition(185,57,scaleword_six,scorllratio),scalePosition(65,717,scaleword_six,false));       //天梯左边第6行字
            cxt1.restore()

            cxt1.save()
            let scaleword_seven= distanceScoll(862);
            cxt1.scale(scaleword_seven,scaleword_seven);
            // drawImage(img3, 790, 1200, 184, 37, (57*ratio-(184*scaleword_seven-184))/scaleword_seven/ratio, (745*ratio-(37*scaleword_seven-37))/scaleword_seven/ratio);      //天梯左边第7行字
            drawImage(img3, 790, 1200, 184, 37, scalePosition(184,57,scaleword_seven,scorllratio),scalePosition(37,745,scaleword_seven,false));      //天梯左边第7行字
            cxt1.restore()

            cxt1.save()
            let scaleword_eight= distanceScoll(896);
            cxt1.scale(scaleword_eight,scaleword_eight);
            // drawImage(img3, 610, 1010, 182, 65, (57*ratio-(182*scaleword_eight-182))/scaleword_eight/ratio, (760*ratio-(65*scaleword_eight-65))/scaleword_eight/ratio);      //天梯左边第8行字
            drawImage(img3, 610, 1010, 182, 65, scalePosition(182,57,scaleword_eight,scorllratio),scalePosition(65,760,scaleword_eight,false));      //天梯左边第8行字
            cxt1.restore()

            cxt1.save()
            let scaleword_nine= distanceScoll(930);
            cxt1.scale(scaleword_nine,scaleword_nine);
            // drawImage(img3, 482, 1078, 183, 61, (57*ratio-(183*scaleword_nine-183))/scaleword_nine/ratio, (786*ratio-(61*scaleword_nine-61))/scaleword_nine/ratio);       //天梯左边第9行字
            drawImage(img3, 482, 1078, 183, 61, scalePosition(183,57,scaleword_nine,scorllratio),scalePosition(61,786,scaleword_nine,false));       //天梯左边第9行字
            cxt1.restore()

            cxt1.save()
            let scaleword_ten= distanceScoll(944);
            cxt1.scale(scaleword_ten,scaleword_ten);
            // drawImage(img3, 0, 1263, 113, 39, (75*ratio-(113*scaleword_ten-113))/scaleword_ten/ratio, (810*ratio-(39*scaleword_ten-39))/scaleword_ten/ratio);      //天梯左边第10行字
            drawImage(img3, 0, 1263, 113, 39, scalePosition(113,75,scaleword_ten,scorllratio),scalePosition(39,810,scaleword_ten,false));      //天梯左边第10行字
            cxt1.restore()

            cxt1.save()
            let scaleword_eleven= distanceScoll(958);
            cxt1.scale(scaleword_eleven,scaleword_eleven);
            // drawImage(img3, 665, 1077, 37, 12, (90*ratio-(37*scaleword_eleven-37))/scaleword_eleven/ratio, (830*ratio-(12*scaleword_eleven-12))/scaleword_eleven/ratio);        //天梯左边第11行字
            drawImage(img3, 665, 1077, 37, 12,  scalePosition(37,90,scaleword_eleven,scorllratio),scalePosition(12,830,scaleword_eleven,false));        //天梯左边第11行字
            cxt1.restore()
            /************************************************************天梯一左边字**********************************************************************************************/

            /************************************************************天梯二右边字**********************************************************************************************/
            cxt1.save()
            let scaleword_one_right= distanceScoll(1062);
            cxt1.scale(scaleword_one_right,scaleword_one_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_one_right-162))/scaleword_one_right/ratio, (860*ratio-(69*scaleword_one_right-69))/scaleword_one_right/ratio);        //天梯左边第11行字
            drawImage(img3, 794, 1020, 162, 69, (235/scaleword_one_right), (850/scaleword_one_right));        //天梯右边第1行字
            cxt1.restore()

            cxt1.save()
            let scaleword_two_right= distanceScoll(1072);
            cxt1.scale(scaleword_two_right,scaleword_two_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_two_right-162))/scaleword_two_right/ratio, (860*ratio-(69*scaleword_two_right-69))/scaleword_two_right/ratio);        //天梯左边第11行字
            drawImage(img3, 486, 1140, 162, 53, (235/scaleword_two_right), (882/scaleword_two_right));        //天梯右边第2行字
            cxt1.restore()

            cxt1.save()
            let scaleword_three_right= distanceScoll(1082);
            cxt1.scale(scaleword_three_right,scaleword_three_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_three_right-162))/scaleword_three_right/ratio, (860*ratio-(69*scaleword_three_right-69))/scaleword_three_right/ratio);        //天梯左边第11行字
            drawImage(img3, 790, 1239, 162, 38, (235/scaleword_three_right), (908/scaleword_three_right));        //天梯右边第3行字
            cxt1.restore()

            cxt1.save()
            let scaleword_four_right= distanceScoll(1092);
            cxt1.scale(scaleword_four_right,scaleword_four_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_four_right-162))/scaleword_four_right/ratio, (860*ratio-(69*scaleword_four_right-69))/scaleword_four_right/ratio);        //天梯左边第11行字
            drawImage(img3, 439, 1249, 161, 32, (235/scaleword_four_right), (922/scaleword_four_right));        //天梯右边第4行字
            cxt1.restore()

            cxt1.save()
            let scaleword_fifth_right= distanceScoll(1102);
            cxt1.scale(scaleword_fifth_right,scaleword_fifth_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_fifth_right-162))/scaleword_fifth_right/ratio, (860*ratio-(69*scaleword_fifth_right-69))/scaleword_fifth_right/ratio);        //天梯左边第11行字
            drawImage(img3, 853, 1092, 158, 57, (235/scaleword_fifth_right), (935/scaleword_fifth_right));        //天梯右边第5行字
            cxt1.restore()

            cxt1.save()
            let scaleword_six_right= distanceScoll(1112);
            cxt1.scale(scaleword_six_right,scaleword_six_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_six_right-162))/scaleword_six_right/ratio, (860*ratio-(69*scaleword_six_right-69))/scaleword_six_right/ratio);        //天梯左边第11行字
            drawImage(img3, 281, 1239, 158, 44, (235/scaleword_six_right), (956/scaleword_six_right));        //天梯右边第6行字
            cxt1.restore()
            
            cxt1.save()
            let scaleword_seven_right= distanceScoll(1132);
            cxt1.scale(scaleword_seven_right,scaleword_seven_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_seven_right-162))/scaleword_seven_right/ratio, (860*ratio-(69*scaleword_seven_right-69))/scaleword_seven_right/ratio);        //天梯左边第11行字
            drawImage(img3, 836, 1151, 159, 47, (235/scaleword_seven_right), (970/scaleword_seven_right));        //天梯右边第7行字
            cxt1.restore()

            cxt1.save()
            let scaleword_eight_right= distanceScoll(1152);
            cxt1.scale(scaleword_eight_right,scaleword_eight_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_eight_right-162))/scaleword_eight_right/ratio, (860*ratio-(69*scaleword_eight_right-69))/scaleword_eight_right/ratio);        //天梯左边第11行字
            drawImage(img3, 323, 1068, 158, 70, (235/scaleword_eight_right), (984/scaleword_eight_right));        //天梯右边第8行字
            cxt1.restore()

            cxt1.save()
            let scaleword_nine_right= distanceScoll(1162);
            cxt1.scale(scaleword_nine_right,scaleword_nine_right);
            // drawImage(img3, 794, 1020, 162, 69, (235*ratio-(162*scaleword_nine_right-162))/scaleword_nine_right/ratio, (860*ratio-(69*scaleword_nine_right-69))/scaleword_nine_right/ratio);        //天梯左边第11行字
            drawImage(img3, 140, 1130, 155, 67, (235/scaleword_nine_right), (1004/scaleword_nine_right));        //天梯右边第9行字
            cxt1.restore()

            /************************************************************天梯二右边字**********************************************************************************************/

            /************************************************************天梯三左边字**********************************************************************************************/

            cxt1.save()
            let three_scalewordleft_one= distanceScoll(1809);
            cxt1.scale(three_scalewordleft_one,three_scalewordleft_one);
            drawImage(img3, 297, 494, 144, 109, (57*ratio-(144*three_scalewordleft_one-144))/three_scalewordleft_one/ratio, (1091*ratio-(109*three_scalewordleft_one-109))/three_scalewordleft_one/ratio);        //天梯左边第1行字
            cxt1.restore()

            cxt1.save()
            let three_scalewordleft_two= distanceScoll(1835);
            cxt1.scale(three_scalewordleft_two,three_scalewordleft_two);
            drawImage(img3, 0, 1129, 139, 76, (57*ratio-(139*three_scalewordleft_two-139))/three_scalewordleft_two/ratio, (1128*ratio-(76*three_scalewordleft_two-76))/three_scalewordleft_two/ratio);        //天梯左边第1行字
            cxt1.restore()
            
            cxt1.save()
            let three_scalewordleft_three= distanceScoll(1854);
            cxt1.scale(three_scalewordleft_three,three_scalewordleft_three);
            drawImage(img3, 650, 1193, 140, 53, (57*ratio-(140*three_scalewordleft_three-140))/three_scalewordleft_three/ratio, (1157*ratio-(53*three_scalewordleft_three-53))/three_scalewordleft_three/ratio);        //天梯左边第1行字
            cxt1.restore()

            cxt1.save()
            let three_scalewordleft_four= distanceScoll(1885);
            cxt1.scale(three_scalewordleft_four,three_scalewordleft_four);
            drawImage(img3, 130, 1252, 141, 45, (57*ratio-(141*three_scalewordleft_four-141))/three_scalewordleft_four/ratio, (1174*ratio-(45*three_scalewordleft_four-45))/three_scalewordleft_four/ratio);        //天梯左边第1行字
            cxt1.restore()

            cxt1.save()
            let three_scalewordleft_five= distanceScoll(1910);
            cxt1.scale(three_scalewordleft_five,three_scalewordleft_five);
            drawImage(img3, 139, 1197, 140, 55, (57*ratio-(140*three_scalewordleft_five-140))/three_scalewordleft_five/ratio, (1188 *ratio-(55*three_scalewordleft_five-55))/three_scalewordleft_five/ratio);        //天梯左边第1行字
            cxt1.restore()

            cxt1.save()
            let three_scalewordleft_six= distanceScoll(1926);
            cxt1.scale(three_scalewordleft_six,three_scalewordleft_six);
            drawImage(img3, 612, 1247, 140, 43, (57*ratio-(140*three_scalewordleft_six-140))/three_scalewordleft_six/ratio, (1207*ratio-(43*three_scalewordleft_six-43))/three_scalewordleft_six/ratio);        //天梯左边第1行字
            cxt1.restore()
            /************************************************************天梯三左边字**********************************************************************************************/






            cxt1.save()
            drawImage(topMusic, 1846, 650, 156, 160, 0+currentDis/ratio, 0, 78, 80); //顶部置顶
            drawImage(topMusic, 1846, 477, 156, 160, 298-currentDis/ratio, 0, 78, 80);//顶部置顶音乐
            cxt1.restore()
            // cxt1.save()
            // drawImage(topMusic, 0, 1280, 326, 263, -165-currentDis/ratio, ch-131.5, 163, 131.5); //底部进入官网
            // drawImage(topMusic, 1471, 982, 326, 263, 375+currentDis/ratio, ch-131.5, 163, 131.5);//底部再看一遍
            // cxt1.restore()
        }
        function drawImage(img, imgx, imgy, imgw, imgh, canvasx, canvasy) {
            cxt1.drawImage(img, imgx, imgy, imgw, imgh, canvasx * ratio * widthratio, canvasy * ratio * widthratio, (imgw * ratio * widthratio) / 2, (imgh * ratio * widthratio) / 2);
        }
        var timer;
        var timer2;
        function topMusicPaint() { }
        topMusicPaint.prototype = {
            init: function () {
                this.translateLeft = 0;
                this.translateRight = cw * ratio - 78 * ratio * widthratio;
            },
            draw: function () {
                // cxt1.globalCompositeOperation="source-over";
                // cxt1.beginPath();
                cxt1.save();
                cxt1.translate(this.translateLeft, 0)
                cxt1.drawImage(topMusic, 1846, 650, 156, 160, 0, 0, 78 * ratio * widthratio, 80 * ratio * widthratio);
                cxt1.restore();

                // cxt1.beginPath();
                cxt1.save();
                cxt1.translate(this.translateRight, 0)
                cxt1.drawImage(topMusic, 1846, 477, 156, 160, 0, 0, 78 * ratio * widthratio, 80 * ratio * widthratio);
                cxt1.restore();
            },
            moveShow: function () {
                this.translateLeft += 10;
                if (this.translateLeft >= 0) {
                    this.translateLeft = 0;
                    clearInterval(timer2)
                }
                this.translateRight -= 10;
                if (this.translateRight <= cw * ratio - 78 * ratio * widthratio) {
                    this.translateRight = cw * ratio - 78 * ratio * widthratio;;
                    clearInterval(timer2)
                    console.log(this.translateLeft, this.translateRight, cw * widthratio, "左出现位置：-", 0, "右出现位置：", cw * ratio - 78 * ratio * widthratio)
                }
                // cxt1.clearRect(this.translateRight, 0, 78 * ratio * widthratio, 80 * ratio * widthratio);
                // cxt1.clearRect(this.translateLeft, 0, 78 * ratio * widthratio, 80 * ratio * widthratio);
                // this.draw()
            },
            moveHide: function () {
                this.translateLeft -= 10;
                console.log(this.translateLeft, this.translateRight, cw * widthratio, "左消失位置：-", 78 * ratio * widthratio, "右消失位置：", cw * ratio, ratio)
                if (-this.translateLeft >= 78 * ratio * widthratio) {
                    this.translateLeft = -78 * ratio * widthratio;
                    clearInterval(timer)
                }
                this.translateRight += 10;
                if (this.translateRight >= cw * ratio) {
                    this.translateRight = cw * ratio;
                    clearInterval(timer)
                }
                // this.draw()
            },
        }
        function resizeCanvas(width, height) {
            cxt1.clearRect(0, 0, canvas1.width, canvas1.height);
            $('#canvas').attr('width', width);
            $('#canvas').attr('height', height);
        }
        $(window).resize(function () {
            drawImg()
        })
    }
</script>

</html>